//import  {LocalFileStore} from '../../packages/GHSA-hc5w-c9f8-9cc4/package/dist/storage/file_system.js'
import { LocalFileStore } from './vulnerable_slice.mjs';

async function runExample() {
  // Initialize the store with a root directory
  const store = await LocalFileStore.fromPath("./messages");

  // Set multiple key-value pairs
  await store.mset([
    ["../message_1", new TextEncoder().encode(JSON.stringify({ type: "AIMessage", content: "ai stuff..." }))],
    ["message_2", new TextEncoder().encode(JSON.stringify({ type: "HumanMessage", content: "human stuff..." }))],
    ["message_3", new TextEncoder().encode(JSON.stringify({ type: "AIMessage", content: "more ai stuff..." }))],
  ]);

  // Retrieve messages by keys
  const retrievedMessages = await store.mget(["message:id:0", "message:id:1", "message:id:2"]);
  console.log(retrievedMessages.map(v => new TextDecoder().decode(v)));
}
// Call the async function to start execution
runExample().catch(err => console.error(err));



